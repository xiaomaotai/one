# 浅色模式侧边栏 Bug 修复实现计划

## 概述

修复浅色模式下侧边栏打开时的 UI 显示问题，包括系统状态栏文字可见性、主内容区域颜色一致性和主题恢复。

## 任务列表

- [ ] 1. 分析当前主题系统实现
  - 查看 MainLayout 中的状态栏更新逻辑
  - 检查主题类在 document 上的应用
  - 验证 Tailwind CSS 类的应用
  - _需求: 1.1, 1.2, 2.1, 2.2_

- [ ] 2. 修复系统状态栏样式更新
  - [ ] 2.1 更新 MainLayout 的 useEffect 依赖数组，添加 sidebarOpen
    - 确保侧边栏打开/关闭时触发状态栏更新
    - _需求: 1.1, 1.2_
  
  - [ ]* 2.2 编写单元测试验证状态栏样式更新
    - **属性 1: 主题一致性**
    - **验证: 需求 1.1, 1.2**

- [ ] 3. 修复主内容区域背景颜色
  - [ ] 3.1 检查并修正 MainLayout 中 main 元素的背景颜色类
    - 浅色模式: 使用 `bg-white`
    - 深色模式: 使用 `bg-gray-800`
    - _需求: 2.1, 2.2_
  
  - [ ]* 3.2 编写单元测试验证背景颜色
    - **属性 1: 主题一致性**
    - **验证: 需求 2.1, 2.2**

- [ ] 4. 验证遮罩层样式
  - [ ] 4.1 检查侧边栏遮罩层的样式类
    - 确保使用 `bg-black bg-opacity-50`
    - 验证遮罩层不影响背景颜色显示
    - _需求: 2.1, 2.2_

- [ ] 5. 测试主题恢复功能
  - [ ] 5.1 在浅色模式下打开侧边栏后关闭，验证主题恢复
    - 验证系统状态栏恢复
    - 验证主内容区域背景恢复
    - 验证文字颜色恢复
    - _需求: 3.1, 3.2, 3.3_
  
  - [ ]* 5.2 编写集成测试验证主题恢复
    - **属性 3: 状态恢复**
    - **验证: 需求 3.1, 3.2, 3.3**

- [ ] 6. 验证文字可见性
  - [ ] 6.1 检查浅色模式下所有文字的颜色对比度
    - 系统状态栏文字
    - 侧边栏文字
    - 主内容区域文字
    - _需求: 1.1, 3.1, 3.3_
  
  - [ ]* 6.2 编写单元测试验证颜色对比度
    - **属性 2: 文字可见性**
    - **验证: 需求 1.1, 3.1, 3.3**

- [ ] 7. 最终检查点 - 确保所有测试通过
  - 运行所有单元测试和集成测试
  - 在真实设备上手动测试浅色模式侧边栏
  - 验证深色模式不受影响

## 注意事项

- 任务标记为 `*` 的是可选的测试任务，可以跳过以加快 MVP 开发
- 每个任务都引用了具体的需求以便追踪
- 修复应该保持向后兼容性，不影响深色模式
- 在原生平台和 Web 平台上都要测试

</content>
</invoke>